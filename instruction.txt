ğŸ“ Instructions IA â€“ Projet INGRWF-12 (CMS + API Nuxt 4)
ğŸ¯ Objectif

Lâ€™IA doit produire du code pour le CMS + API du projet global.
Le CMS servira Ã  la gestion admin (CRUD des saisons, semaines, Ã©tapes, exercices, coureurs, exports JSON/CSV).
Lâ€™API sera exposÃ©e pour alimenter aussi bien le CMS que lâ€™application client (coureurs).

âš ï¸ Lâ€™application client (coureur) nâ€™est pas dÃ©veloppÃ©e ici.
On se concentre sur le CMS/Admin + API.

ğŸ”§ Stack technique

Framework : Nuxt 4 (SSR activÃ©)

Gestion dâ€™Ã©tat : Pinia

RequÃªtes API : useFetch() (jamais de fetch natif)

Base de donnÃ©es & Auth : Supabase (via @supabase/supabase-js)

Style : TailwindCSS (config perso assets/css/main.css)

ThÃ¨me : glassmorphism moderne et sobre

Couleurs inspirÃ©es du logo (dans public/)

DÃ©ploiement :

Client â†’ Netlify

Backend/API â†’ Hostinger (CI/CD)

ğŸ“‚ Structure attendue
app/
 â”œâ”€ assets/css/main.css       # Tailwind + thÃ¨mes
 â”œâ”€ stores/                   # Pinia stores
 â”œâ”€ server/api/               # Endpoints Nuxt (REST)
 â”œâ”€ pages/admin/              # Pages CMS admin
 â”œâ”€ components/               # UI components
 â”œâ”€ layouts/                  # Layouts (admin, authâ€¦)
 â”œâ”€ middleware/               # Auth middleware

ğŸ”‘ RÃ¨gles importantes

Toujours utiliser useFetch() pour appeler lâ€™API depuis le CMS.

Toujours coder compatible SSR.

Ne jamais effacer un fichier en cas dâ€™erreur â†’ signale lâ€™erreur plutÃ´t que de recommencer.

Pinia est obligatoire pour toute gestion dâ€™Ã©tat (ex : useAdminStore, useCoureurStore, useFormationStoreâ€¦)

Les endpoints API sont crÃ©Ã©s dans server/api/*.

Exemple : server/api/auth/login.post.ts

Tous les endpoints doivent interagir avec Supabase (supabase-js).

Les stores Pinia doivent gÃ©rer :

lâ€™Ã©tat (state)

les sÃ©lecteurs (getters)

les appels API (actions avec useFetch).

Respecter le style glassmorphism : bordures floutÃ©es, transparence douce, couleurs sobres + accents logo.

ğŸ“Œ Ã‰tapes de dÃ©veloppement
1. Authentification

Admin : login/logout avec rÃ´le admin.

Coureur : login/logout avec rÃ´le coureur.

Supabase gÃ¨re auth.users + user_profiles.

Middleware Nuxt (middleware/auth.global.ts) â†’ protÃ¨ge /admin/*.

2. CRUD Formation

saisons, semaines, etapes, exercices (via Supabase).

Store useFormationStore.

Pages admin CRUD avec formulaires (ex: /admin/saisons, /admin/exercices).

3. Gestion des coureurs

Admin peut lister / modifier / supprimer coureurs (user_profiles).

Page /admin/coureurs.

4. Progression coureur

Table progression.

Admin peut consulter lâ€™avancement dâ€™un coureur.

5. Export

Endpoint /api/export/admin â†’ JSON (progressions + profils).

Endpoint /api/export/coureur â†’ CSV (progression perso).